# Music Recommendation Service

Flask-based REST API service that provides music recommendations using association rules generated by the Eclat algorithm.

## Overview

This service reads pre-trained models from a shared directory and returns song recommendations through a REST API. It works in conjunction with the training-service which generates the models.

## Architecture

- **Port:** 50005
- **Models Directory:** `/app/models` (mounted from `/home/caiogrossi/project2-pv/models`)
- **Access:** Read-only access to models
# Music Recommendation Service (brief)

Flask-based REST API that serves recommendations from association-rule models (stored under `/app/models`).

Key points
- The repository is configured so that any change to the code or to the dataset URL triggers a new training job and an API update via GitHub Actions + ArgoCD. Changes are applied automatically; no manual redeploy is required.
- You can use the included `client.sh` or deploy the ArgoCD App-of-Apps (`manifest/manifest-argosystem.yaml` and `manifest/manifest-argoapp.yaml`) to run everything in-cluster.

Quick usage
- Health: `GET /health`
- Recommend: `POST /api/recommender` with JSON `{"songs": ["Song A", "Song B"]}`
- Reload model: `POST /reload-model` (hot-reload)

Models
- Models and `metadata.json` live in `/app/models` inside the container (mount a PVC or a host path to this location).

Build and run (local, succinct)
1. Build API image:
```bash
cd project-delivery/flask-api
docker build -f ../docker/Dockerfile.api -t recommendation-api:latest .
```
2. Run API (mount models):
```bash
docker run -d --name recommendation-api-local -p 50005:50005 \
  -v /path/to/models:/app/models:ro recommendation-api:latest
```

If you prefer Kubernetes, apply the repository Argo manifests (see top-level README). The CI workflows handle image tagging and manifest updates automatically.

For a fuller, developer-friendly README see the top-level repository README.
